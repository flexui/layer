!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("layer",["jquery"],t):e.Layer=t(e.jQuery)}(this,function(e){"use strict";function t(e,t,n,o){Array.isArray(n)||(n=!1);var r;for(var a in t)if(t.hasOwnProperty(a)){if(n&&(r=n.indexOf(a),o?r===-1:r!==-1))continue;"prototype"!==a&&(e[a]=t[a])}}function n(e,n,o){function r(){}return e.setPrototypeOf?e.setPrototypeOf(n.prototype):e.__proto__?e.__proto__=n.prototype:(r.prototype=n.prototype,e.prototype=new r),e.prototype.constructor=e,t(e,o),e}function o(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2]);default:return e.apply(t,n)}}function r(){}function a(){var t=this;t.destroyed=!1,t.node=document.createElement("div"),t.__node=e(t.node).attr("tabindex","-1").css({display:"none",position:"absolute",outline:0})}e="default"in e?e["default"]:e;var i=Array.prototype,c=(e(window),e(document)),u=i.slice;r.prototype={on:function(e,t,n){var o=this,r=o.e||(o.e={});return n=arguments.length<3?o:n,(r[e]||(r[e]=[])).push({fn:t,context:n}),o},once:function(e,t,n){function r(){a.off(e,r),o(t,this,arguments)}var a=this;return a.on(e,r,n)},emit:function(e){for(var t,n=this,r=u.call(arguments,1),a=n.e||(n.e={}),i=a[e]||[],c=0,s=i.length;c<s;c++)t=i[c],o(t.fn,t.context,r);return n},off:function(e,t,n){var o=this,r=o.e||(o.e={}),a=arguments.length;switch(a){case 0:o.e={};break;case 1:delete r[e];break;default:if(t){var i=r[e];if(i){n=a<3?o:n,a=i.length;for(var c=0;c<a;c++)if(evts[c].fn===t&&evts[c].fn.context===n){i.splice(c,1);break}i.length||delete r[e]}}}return o}};var s=1024,f={alloc:[],node:e('<div tabindex="0"></div>').css({position:"fixed",top:0,left:0,width:"100%",height:"100%",userSelect:"none"}),shim:e('<div tabindex="0"></div>').css({width:0,height:0,opacity:0}),zIndex:function(e){e=Math.max(0,--e),f.node.css("z-index",e)},attach:function(e){var t=e.node,n=e.className+"-backdrop";f.node.addClass(n).insertBefore(t),f.shim.insertAfter(t)},show:function(e){var t=f.alloc;t.indexOf(e)===-1&&(f.attach(e),t.push(e))},hide:function(e){var t=f.alloc;f.alloc=t.filter(function(t){return e!==t});var n=t.length;0===n?(f.node.remove(),f.shim.remove()):(e=t[n-1],f.zIndex(e.zIndex),f.attach(e))}};return a.active=null,a.zIndex=s,a.backdrop=f.node,c.on("focusin",function(e){var t=a.active;if(t&&t.modal){var n=e.target,o=t.node;n===o||o.contains(n)||t.focus()}}),n(a,r,{node:null,destroyed:!0,open:!1,autofocus:!0,modal:!1,innerHTML:"",className:"ui-layer",constructor:a,focus:function(){var e=this;if(e.destroyed||!e.open)return e;var t=e.node,n=e.__node,o=a.active;if(o&&o!==e&&o.blur(!1),!n.contains(e.__getActive())){var r=n.find("[autofocus]")[0];!e.__autofocus&&r?e.__autofocus=!0:r=t,e.__focus(r)}if(o!==e){var i=e.zIndex=a.zIndex++;Backdrop.zIndex(i),n.css("zIndex",i),n.addClass(e.className+"-focus"),e.emit("focus"),a.active=e}return e},blur:function(){var e=this;if(e.destroyed||!e.open)return e;var t=arguments[0],n=e.__activeElement;return t!==!1&&e.__focus(n),e.__autofocus=!1,e.__node.removeClass(e.className+"-focus"),e.emit("blur"),e},__focus:function(e){try{this.autofocus&&!/^iframe$/i.test(e.nodeName)&&e.focus()}catch(t){}},__getActive:function(){try{var e=document.activeElement,t=e.contentDocument,n=t&&t.activeElement||e;return n}catch(o){}}}),a});
//# sourceMappingURL=layer.js.map